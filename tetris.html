<html>
  <head>
    <link rel="stylesheet" href="css/web_arcade.css">

    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="js/crafty.js"></script>
    <script>
      $(document).ready(function() {
        var speed = 400;
        Crafty.init(700,810, document.getElementById('game'));

        Crafty.c("floor", {
            init: function() {
                this.addComponent('2D, DOM, Color, Solid')
                .attr({x: 0, y: 800, w: 600, h: 10})
                .color('#000000');
            }
        });

        Crafty.c("block", {
            init: function(width, height) {
                this.addComponent('2D, DOM, Color, Delay, Collision, Solid')
                .color('#49b112')
                .requires('Keyboard')
                .bind('KeyDown', function () {
                    if (this.isDown('RIGHT_ARROW') || this.isDown('D')) {
                        this.move('e', 50);
                    } else if (this.isDown('LEFT_ARROW') || this.isDown('A')) {
                        this.move('w', 50);
                    } else if (this.isDown('UP_ARROW') || this.isDown('W')) {
                        this.rotation = this._rotation + 90;
                    } else if (this.isDown('DOWN_ARROW') || this.isDown('s')) {
                        this.rotation = this._rotation - 90;
                    }
                })
                .delay(function() {
                    this.move('s', 50);
                }, speed, -1)
                .onHit('Solid', this.stopMovement);
            },

            // Stops the movement
            stopMovement: function() {
                this.unbind('KeyDown');
                this.destroy();
            },

            attribute: function(width, height) {
                this.attr({x: 300, y: 0, w: width, h: height});
            }
        });

        Crafty.e("floor");
        Crafty.e("block").attribute(50, 200);
      })
    </script>
  </head>
  <body>
    <div id="game" class="content"></div>
  </body>
</html>
